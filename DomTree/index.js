"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}
/*!
* xhtml-engine v2.0.1
* (c) 2020-2020 心叶 git+https://github.com/yelloxing/xhtml-engine.git
* License: MIT
*/!function(){var e={blankReg:new RegExp("[\\x20\\t\\r\\n\\f]"),blanksReg:/^[\x20\t\r\n\f]{0,}$/},t=Object.prototype.toString;function n(e){var n=_typeof(e);return"string"===n||"object"===n&&null!=e&&!Array.isArray(e)&&"[object String]"===function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":t.call(e)}(e)}function r(t){var n=-1,r=null,a=!1,l="",o=["script","pre","style","code"],g=function(){return r=n++<t.length-1?t[n]:null},u=function(e){return t.substring(n,e+n>t.length?t.length:e+n)};for(g();e.blankReg.test(r)&&n<t.length-1;)g();return function(){var p=r,s={};if(null==p)return null;if(a){for(s.type="textcode",s.tagName=p;u(l.length+3)!="</"+l+">"&&n<t.length;)s.tagName+=g();return s.tagName=s.tagName.replace(/<$/,""),a=!1,s}if("\x3c!--"==u(4)){for(s.type="comment",s.tagName=p;"--\x3e"!=u(3)&&n<t.length;)s.tagName+=g();return g(),g(),g(),s.tagName=s.tagName.replace(/^<!--/,"").replace(/-$/,""),s}if("<!DOCTYPE"==u(9)){for(s.type="DOCTYPE",s.tagName=p;">"!=u(1)&&n<t.length;)s.tagName+=g();return g(),s.tagName=s.tagName.replace(/^<!DOCTYPE/,"").replace(/>$/,""),s}if("<"==p){for(var f=!1,i=null,c=null;f||">"!=r&&n<t.length;)if(p+=g(),f){u(c+1).substring(1)==i&&(f=!1)}else{var m=u(2);'="'!=m&&"='"!=m||(i=m.replace("=",""),c=1,f=!0),'="'!=(m=u(3))&&"='"!=m||(i=m.replace("=",""),c=2,f=!0)}if(/^<\//.test(p))s.tagName=p.replace(/^<\//,"").replace(/>$/,""),s.type="endTag";else{/\/>$/.test(p)?(s.type="fullTag",p=p.replace(/\/>$/,"")):(s.type="beginTag",p=p.replace(/>$/,"")),p=p.replace(/^</,""),s.tagName="";for(var y=0;y<p.length&&" "!=p[y];y++)s.tagName+=p[y];var d=p.substring(y);e.blanksReg.test(d)?s.attrs={}:s.attrs=function(t){var n={},r=0;return t=t.trim(),function a(){for(var l="",o="";r<t.length;r++){if(e.blanksReg.test(t[r])||r==t.length-1){l+=t[r],e.blanksReg.test(l)||(n[l.trim()]=""),r+=1;break}if("="==t[r]){r+=1;var g=null,u=-1;if('"'==t.substr(r,1)||"'"==t.substr(r,1)?(g=t.substr(r,1),u=1,r+=1):'"'!=t.substr(r,2)&&"'"!=t.substr(r,2)||(g=t.substr(r,2),u=2,r+=2),null!==g)for(;r<t.length;r++){if(t.substr(r,u)==g){n[l.trim()]=o.trim(),r+=2;break}o+=t[r]}else for(;r<t.length;r++){if(e.blanksReg.test(t[r])){n[l.trim()]=o.trim(),r+=1;break}o+=t[r]}break}l+=t[r]}r<t.length&&a()}(),n}(d)}}else{for(s.type="textcode",s.tagName=r;"<"!=u(1)&&n<t.length;)s.tagName+=g();s.tagName=s.tagName.replace(/<$/,""),n-=1}return"beginTag"==s.type?o.indexOf(s.tagName.toLowerCase())>-1&&(a=!0,l=s.tagName):"endTag"==s.type&&o.indexOf(s.tagName.toLowerCase())>-1&&(a=!1),g(),s}}var a=function(e){var t=[];return e.forEach((function(n,r){if("beginTag"==n.type)t.push([r,n.tagName]);else if("endTag"==n.type)for(;t.length>0;){var a=t.pop();if(a[1]==n.tagName)break;e[a[0]].type="fullTag"}})),e};function l(t,l){if(!n(t))throw new Error("Template must be a String!");for(var o=r(t),g=o(),u=[];null!=g;)"textcode"==g.type&&e.blanksReg.test(g.tagName)||"DOCTYPE"==g.type||("comment"==g.type?l&&u.push(g):u.push(g)),g=o();u=function(e){e=a(e);var t=0,n=[];return e.forEach((function(e){"beginTag"==e.type?n.push({type:"tag",name:e.tagName,attrs:e.attrs,__deep__:++t,__tagType__:"double"}):"endTag"==e.type?t-=1:"textcode"==e.type?n.push({type:"text",content:e.tagName,__deep__:t+1}):"comment"==e.type?n.push({type:"comment",content:e.tagName,__deep__:t+1}):n.push({type:"tag",name:e.tagName,attrs:e.attrs,__deep__:t+1,__tagType__:"single"})})),n}(u);for(var p=[null],s=0,f=0;f<u.length;f++){var i=f,c=u[f].__deep__;u[f].childNodes=[],u[f].preNode=null,u[f].nextNode=null;var m=p[p.length-1],y=p.length>1?p[p.length-2]:null;if(c==s)u[i].preNode=m,u[m].nextNode=i,u[i].parentNode=y,u[y].childNodes.push(i),p[p.length-1]=i;else if(c>s)u[i].parentNode=m,null!=m&&u[m].childNodes.push(i),p.push(i);else{var d=p[p.length-1-(s-c)],b=p[p.length-2-(s-c)];u[i].preNode=d,null!=d&&(u[d].nextNode=i),u[i].parentNode=b,null!=b&&u[b].childNodes.push(i);for(var h=0;h<s-c;h++)p.pop();p[p.length-1]=i}s=c}return u}"object"===("undefined"==typeof module?"undefined":_typeof(module))&&"object"===_typeof(module.exports)?module.exports=l:window.DomTree=l}();