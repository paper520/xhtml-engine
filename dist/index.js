"use strict";function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}
/*!
* xhtml-engine v2.0.1
* (c) 2020-2020 心叶 git+https://github.com/yelloxing/xhtml-engine.git
* License: MIT
*/!function(){var e=Object.prototype.toString;function t(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":e.call(t)}function r(e){var r=_typeof(e);return"string"===r||"object"===r&&null!=e&&!Array.isArray(e)&&"[object String]"===t(e)}function n(e,t){return t?function(e){return function(e){return null!=e&&"function"!=typeof e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}(e.length)}(e)&&!r(e)}(e):Array.isArray(e)}var o={blankReg:new RegExp("[\\x20\\t\\r\\n\\f]"),blanksReg:/^[\x20\t\r\n\f]{0,}$/};function a(e){var t=-1,r=null,n=!1,a="",i=["script","pre","style","code"],_=function(){return r=t++<e.length-1?e[t]:null},l=function(r){return e.substring(t,r+t>e.length?e.length:r+t)};for(_();o.blankReg.test(r)&&t<e.length-1;)_();return function(){var s=r,u={};if(null==s)return null;if(n){for(u.type="textcode",u.tagName=s;l(a.length+3)!="</"+a+">"&&t<e.length;)u.tagName+=_();return u.tagName=u.tagName.replace(/<$/,""),n=!1,u}if("\x3c!--"==l(4)){for(u.type="comment",u.tagName=s;"--\x3e"!=l(3)&&t<e.length;)u.tagName+=_();return _(),_(),_(),u.tagName=u.tagName.replace(/^<!--/,"").replace(/-$/,""),u}if("<!DOCTYPE"==l(9)){for(u.type="DOCTYPE",u.tagName=s;">"!=l(1)&&t<e.length;)u.tagName+=_();return _(),u.tagName=u.tagName.replace(/^<!DOCTYPE/,"").replace(/>$/,""),u}if("<"==s){for(var h=!1,p=null,f=null;h||">"!=r&&t<e.length;)if(s+=_(),h){l(f+1).substring(1)==p&&(h=!1)}else{var c=l(2);'="'!=c&&"='"!=c||(p=c.replace("=",""),f=1,h=!0),'="'!=(c=l(3))&&"='"!=c||(p=c.replace("=",""),f=2,h=!0)}if(/^<\//.test(s))u.tagName=s.replace(/^<\//,"").replace(/>$/,""),u.type="endTag";else{/\/>$/.test(s)?(u.type="fullTag",s=s.replace(/\/>$/,"")):(u.type="beginTag",s=s.replace(/>$/,"")),s=s.replace(/^</,""),u.tagName="";for(var g=0;g<s.length&&" "!=s[g];g++)u.tagName+=s[g];var m=s.substring(g);o.blanksReg.test(m)?u.attrs={}:u.attrs=function(e){var t={},r=0;return e=e.trim(),function n(){for(var a="",i="";r<e.length;r++){if(o.blanksReg.test(e[r])||r==e.length-1){a+=e[r],o.blanksReg.test(a)||(t[a.trim()]=""),r+=1;break}if("="==e[r]){r+=1;var _=null,l=-1;if('"'==e.substr(r,1)||"'"==e.substr(r,1)?(_=e.substr(r,1),l=1,r+=1):'"'!=e.substr(r,2)&&"'"!=e.substr(r,2)||(_=e.substr(r,2),l=2,r+=2),null!==_)for(;r<e.length;r++){if(e.substr(r,l)==_){t[a.trim()]=i.trim(),r+=2;break}i+=e[r]}else for(;r<e.length;r++){if(o.blanksReg.test(e[r])){t[a.trim()]=i.trim(),r+=1;break}i+=e[r]}break}a+=e[r]}r<e.length&&n()}(),t}(m)}}else{for(u.type="textcode",u.tagName=r;"<"!=l(1)&&t<e.length;)u.tagName+=_();u.tagName=u.tagName.replace(/<$/,""),t-=1}return"beginTag"==u.type?i.indexOf(u.tagName.toLowerCase())>-1&&(n=!0,a=u.tagName):"endTag"==u.type&&i.indexOf(u.tagName.toLowerCase())>-1&&(n=!1),_(),u}}var i=function(e){var t=[];return e.forEach((function(r,n){if("beginTag"==r.type)t.push([n,r.tagName]);else if("endTag"==r.type)for(;t.length>0;){var o=t.pop();if(o[1]==r.tagName)break;e[o[0]].type="fullTag"}})),e};function _(e,t){if(!r(e))throw new Error("Template must be a String!");for(var n=a(e),_=n(),l=[];null!=_;)"textcode"==_.type&&o.blanksReg.test(_.tagName)||"DOCTYPE"==_.type||("comment"==_.type?t&&l.push(_):l.push(_)),_=n();l=function(e){e=i(e);var t=0,r=[];return e.forEach((function(e){"beginTag"==e.type?r.push({type:"tag",name:e.tagName,attrs:e.attrs,__deep__:++t,__tagType__:"double"}):"endTag"==e.type?t-=1:"textcode"==e.type?r.push({type:"text",content:e.tagName,__deep__:t+1}):"comment"==e.type?r.push({type:"comment",content:e.tagName,__deep__:t+1}):r.push({type:"tag",name:e.tagName,attrs:e.attrs,__deep__:t+1,__tagType__:"single"})})),r}(l);for(var s=[null],u=0,h=0;h<l.length;h++){var p=h,f=l[h].__deep__;l[h].childNodes=[],l[h].preNode=null,l[h].nextNode=null;var c=s[s.length-1],g=s.length>1?s[s.length-2]:null;if(f==u)l[p].preNode=c,l[c].nextNode=p,l[p].parentNode=g,l[g].childNodes.push(p),s[s.length-1]=p;else if(f>u)l[p].parentNode=c,null!=c&&l[c].childNodes.push(p),s.push(p);else{var m=s[s.length-1-(u-f)],y=s[s.length-2-(u-f)];l[p].preNode=m,null!=m&&(l[m].nextNode=p),l[p].parentNode=y,null!=y&&l[y].childNodes.push(p);for(var d=0;d<u-f;d++)s.pop();s[s.length-1]=p}u=f}return l}function l(e){return"number"==typeof e||null!==e&&"object"===_typeof(e)&&"[object Number]"===t(e)}function s(e,t){for(var r=0;r<e.childNodes.length;r++)e.childNodes[r]+=t;return l(e.preNode)&&(e.preNode+=t),l(e.nextNode)&&(e.nextNode+=t),l(e.parentNode)&&(e.parentNode+=t),e}function u(e){if("text"==e[0].type)return e[0].content;for(var t,n,o,a=[e.__DomTree__[e[0]]],i=0;i<a.length;){do{t=a[i++]}while(r(t));if(!t)break;if("tag"==t.type){for(var _ in n="",t.attrs)n+="".concat(_,'="').concat(t.attrs[_],'" ');if("double"==t.__tagType__){(o=[]).push("<".concat(t.name," ").concat(n,">"));for(var l=0;l<t.childNodes.length;l++)o.push(e.__DomTree__[t.childNodes[l]]);o.push("</".concat(t.name,">")),a.splice.apply(a,[i-1,1].concat(_toConsumableArray(o)))}else a[i-1]="<".concat(t.name," ").concat(n,"/>")}else a[i-1]=t.content}return a.join("")}function h(e,t){for(var r,n,o=e.__DomTree__.length,a=1;a<t.length;a++)t[a].__deep__+=e.__DomTree__[e[0]].__deep__-1,e.__DomTree__.push(s(t[a],o-1));r=e.__DomTree__[e[0]],n=s(t[0],o-1),r.childNodes=n.childNodes,"null-engine-frame"!=n.name&&("tag"==n.type?(r.name=n.name,r.attrs=n.attrs,r.__tagType__=n.__tagType__,"text"==r.type&&delete r.content):(r.content=n.content,"tag"==r.type&&(delete r.attrs,delete r.name,delete r.__tagType__)),r.type=n.type)}var p=function e(t,r){return new e.prototype.init(t,r)};p.prototype.init=function(e,t){if(this.__DomTree__=n(e)?e:_(e),n(t)){for(var r=0;r<t.length;r++)this[r]=t[r];this.length=t.length}else this[0]=0,this.length=1;return this},p.prototype.__new__=function(e,t){return p(e,t)},p.prototype.extend=function(e){for(var t in e)this[t]=e[t];return this},p.prototype.valueOf=function(){if(this.length<=0)return null;var e=this.__DomTree__[this[0]];return"text"==e.type?e.content:{tagName:e.name,attrs:e.attrs}},p.prototype.toString=function(){for(var e="[",t=0;t<this.length;t++){var n=p(this.__DomTree__,[this[t]]).valueOf();e+=(r(n)?n:JSON.stringify(n))+","}return e.replace(/,$/,"")+"]"},p.prototype.extend({parent:function(){var e=null;return this.length>0&&(e=this.__DomTree__[this[0]].parentNode),this.__new__(this.__DomTree__,null==e?[]:[e])},parents:function(){var e=[];if(this.length>0)for(var t=this.__DomTree__[this[0]].parentNode;null!=t;)e.push(t),t=this.__DomTree__[t].parentNode;return this.__new__(this.__DomTree__,e)},children:function(){var e=[];return this.length>0&&(e=this.__DomTree__[this[0]].childNodes),this.__new__(this.__DomTree__,e)},siblings:function(){var e=[];if(this.length>0){e=[this[0]];for(var t=this.__DomTree__[this[0]].preNode;null!=t;)e.unshift(t),t=this.__DomTree__[t].preNode;for(var r=this.__DomTree__[this[0]].nextNode;null!=r;)e.push(r),r=this.__DomTree__[r].nextNode}return this.__new__(this.__DomTree__,e)},next:function(){var e=[];if(this.length>0){var t=this.__DomTree__[this[0]].nextNode;null!=t&&e.push(t)}return this.__new__(this.__DomTree__,e)},nextAll:function(){var e=[];if(this.length>0)for(var t=this.__DomTree__[this[0]].nextNode;null!=t;)e.push(t),t=this.__DomTree__[t].nextNode;return this.__new__(this.__DomTree__,e)},prev:function(){var e=[];if(this.length>0){var t=this.__DomTree__[this[0]].preNode;null!=t&&e.unshift(t)}return this.__new__(this.__DomTree__,e)},prevAll:function(){var e=[];if(this.length>0)for(var t=this.__DomTree__[this[0]].preNode;null!=t;)e.unshift(t),t=this.__DomTree__[t].preNode;return this.__new__(this.__DomTree__,e)},eq:function(e){return this.length>e?this.__new__(this.__DomTree__,[this[e]]):this.__new__(this.__DomTree__,[])},innerHTML:function(e){if(this.length<=0)throw new Error("Null pointer!");if(r(e))return h(this,_("<null-engine-frame>"+e+"</null-engine-frame>")),this;for(var t="",n=this.children(),o=0;o<n.length;o++)t+=u(n.eq(o));return t},outerHTML:function(e){if(this.length<=0)throw new Error("Null pointer!");return r(e)?(h(this,_(e)),this):u(this)},attr:function(e,t){if(this.length<=0)throw new Error("Null pointer!");return arguments.length>1?(this.__DomTree__[this[0]].attrs[e]=t,this):this.__DomTree__[this[0]].attrs[e]}}),p.prototype.init.prototype=p.prototype,"object"===("undefined"==typeof module?"undefined":_typeof(module))&&"object"===_typeof(module.exports)?module.exports=p:window.xHtmlEngine=p}();