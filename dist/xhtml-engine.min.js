"use strict";function _toConsumableArray2(t){return _arrayWithoutHoles2(t)||_iterableToArray2(t)||_unsupportedIterableToArray(t)||_nonIterableSpread2()}function _nonIterableSpread2(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(t,e):void 0}}function _iterableToArray2(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function _arrayWithoutHoles2(t){if(Array.isArray(t))return _arrayLikeToArray(t)}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function _typeof2(t){return(_typeof2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}
/*!
* xhtml-engine v2.0.0
* (c) 2020-2020 心叶 git+https://github.com/yelloxing/xhtml-engine.git
* License: MIT
*/!function(t,e){"object"===("undefined"==typeof exports?"undefined":_typeof2(exports))&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):((t=t||self)["xhtml-engine"]=t["xhtml-engine"]||{},t["xhtml-engine"].rollup=e())}(void 0,(function(){var t=function(t,e){return t(e={exports:{}},e.exports),e.exports}((function(t){function e(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function r(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function n(t,e,i){return(n=r()?Reflect.construct:function(t,e,r){var n=[null];n.push.apply(n,e);var i=new(Function.bind.apply(t,n));return r&&o(i,r.prototype),i}).apply(null,arguments)}function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function i(t){return function(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function u(t){return(u="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(t){return _typeof2(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":_typeof2(t)})(t)}!function(){var r;function o(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}function a(t){return null!=t&&"function"!=typeof t&&o(t.length)}var l=Object.prototype.toString;function f(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":l.call(t)}function c(t){var e=u(t);return"string"===e||"object"===e&&null!=t&&!Array.isArray(t)&&"[object String]"===f(t)}function s(t){return a(t)&&!c(t)}var p=function t(e,r){if(!s(r))return e.push(r);for(var n=0;n<r.length;n++)s(r[n])?r[n].length>1?t(e,r[n]):1===r[n].length&&t(e,r[n][0]):e.push(r[n])};function _(t,e){return t===e||t!=t&&e!=e}function h(t){var e=u(t);return"symbol"===e||"object"===e&&null!==t&&"[object Symbol]"===f(t)}var g=Symbol.prototype.toString,d=Object.prototype.hasOwnProperty;function y(t){if(null==t)return"";if("string"==typeof t)return t;if(c(t))return t+"";if(Array.isArray(t)){for(var e=[],r=0;r<t.length;r++)e[r]=y(t[r]);return"[".concat(e,"]")}if(h(t))return g?g.call(t):"";var n="";for(var o in t)d.call(t,o)&&(n+=',"'+y(o)+'":'+y(t[o]));if(""!==n)return"{"+(n=n.replace(/^,/,""))+"}";var i="".concat(t);return"0"===i&&1/t==-1/0?"-0":i}function m(t){var e=u(t);return null!=t&&("object"===e||"function"===e)}function v(t){if(null===t||"object"!==u(t)||"[object Object]"!=f(t))return!1;if(null===Object.getPrototypeOf(t))return!0;for(var e=t;null!==Object.getPrototypeOf(e);)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function b(t,e){return Array.isArray(t)?t:function(t,e){if(Array.isArray(t))return!1;var r=u(t);return!("number"!=r&&"boolean"!=r&&null!=t&&!h(t))||(null!==e&&t in Object(e)||/^\w*$/.test(t))}(t,e)?[t]:function(t){return t.replace(/\[/g,".").replace(/\]/g,"").replace(/"/g,"").replace(/'/g,"").split(".")}(t)}function N(t){if("string"==typeof t||h(t))return t;var e="".concat(t);return"0"===e&&1/t==-1/0?"-0":e}function T(t,e,r){!function(t,e,r){"__proto__"==e?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}(t,e,r)}var w=[],x=null;var j=(e(r={48:[0,")"],49:[1,"!"],50:[2,"@"],51:[3,"#"],52:[4,"$"],53:[5,"%"],54:[6,"^"],55:[7,"&"],56:[8,"*"],57:[9,"("],96:[0,0],97:1,98:2,99:3,100:4,101:5,102:6,103:7,104:8,105:9,106:"*",107:"+",109:"-",110:".",111:"/",65:["a","A"],66:["b","B"],67:["c","C"],68:["d","D"],69:["e","E"],70:["f","F"],71:["g","G"],72:["h","H"],73:["i","I"],74:["j","J"],75:["k","K"],76:["l","L"],77:["m","M"],78:["n","N"],79:["o","O"],80:["p","P"],81:["q","Q"],82:["r","R"],83:["s","S"],84:["t","T"],85:["u","U"],86:["v","V"],87:["w","W"],88:["x","X"],89:["y","Y"],90:["z","Z"],37:"left",38:"up",39:"right",40:"down",33:"page up",34:"page down",35:"end",36:"home",16:"shift",17:"ctrl",18:"alt",91:"command",92:"command",93:"command",9:"tab",20:"caps lock",32:"spacebar",8:"backspace",13:"enter",27:"esc",46:"delete",45:"insert",144:"number lock",145:"scroll lock",12:"clear"},"45","insert"),e(r,19,"pause"),e(r,112,"f1"),e(r,113,"f2"),e(r,114,"f3"),e(r,115,"f4"),e(r,116,"f5"),e(r,117,"f6"),e(r,118,"f7"),e(r,119,"f8"),e(r,120,"f9"),e(r,121,"f10"),e(r,122,"f11"),e(r,123,"f12"),e(r,189,["-","_"]),e(r,187,["=","+"]),e(r,219,["[","{"]),e(r,221,["]","}"]),e(r,220,["\\","|"]),e(r,186,[";",":"]),e(r,222,["'",'"']),e(r,188,[",","<"]),e(r,190,[".",">"]),e(r,191,["/","?"]),e(r,192,["`","~"]),r),D=["shift","ctrl","alt"];var A=function(t,e){for(var r=[],n=0;n<4;n++)for(var o=0;o<e.length/4;o++)r[4*o+n]=t[n]*e[4*o]+t[n+4]*e[4*o+1]+t[n+8]*e[4*o+2]+t[n+12]*e[4*o+3];return r};var O={concat:function(){for(var t=[],e=0;e<arguments.length;e++)t.push(arguments[e]);var r=[];return p(r,t),r},indexOf:function(t,e,r){if(!a(t))return-1;for((!o(r)||r<0)&&(r=0);r<t.length;r++)if(_(t[r],e))return r;return-1},lastIndexOf:function(t,e,r){if(!a(t))return-1;for((!o(r)||r>t.length-1)&&(r=t.length-1);r>-1;r--)if(_(t[r],e))return r;return-1},unique:function(t){if(!s(t))return t;if(0===t.length)return[];if(1===t.length)return[t[0]];for(var e=[],r=n(Array,i(t));r.length>0;){e.push(r[0]);for(var o=r[0],u=-1,a=1;a<r.length;a++)_(o,r[a])||(r[u+1]=r[a],u+=1);r.length=u+1}return e},eq:_,toString:y,isObject:m,isSymbol:h,isString:c,isBoolean:function(t){return!0===t||!1===t||null!==t&&"object"===u(t)&&"[object Boolean]"===f(t)},isElement:function(t){return null!==t&&"object"===u(t)&&(1===t.nodeType||9===t.nodeType||11===t.nodeType)&&!v(t)},isText:function(t){return null!==t&&"object"===u(t)&&3===t.nodeType&&!v(t)},isFunction:function(t){if(!m(t))return!1;var e=f(t);return"[object Function]"===e||"[object AsyncFunction]"===e||"[object GeneratorFunction]"===e||"[object Proxy]"===e},isError:function(t){if(null===t||"object"!==u(t))return!1;var e=f(t);return"[object Error]"===e||"[object DOMException]"===e||"string"==typeof t.message&&"string"==typeof t.name&&!v(t)},isNull:function(t){return null===t},isNumber:function(t){return"number"==typeof t||null!==t&&"object"===u(t)&&"[object Number]"===f(t)},isUndefined:function(t){return void 0===t},isArray:function(t,e){return e?s(t):Array.isArray(t)},max:function(t,e){if(a(t)&&!(t.length<1)){if(e){for(var r,n=0,o=e(t[0],0),i=1;i<t.length;i++)(r=e(t[i],i))>o&&(o=r,n=i);return t[n]}for(var u=0,l=1;l<t.length;l++)t[l]>t[u]&&(u=l);return t[u]}},min:function(t,e){if(a(t)&&!(t.length<1)){if(e){for(var r,n=0,o=e(t[0],0),i=1;i<t.length;i++)(r=e(t[i],i))<o&&(o=r,n=i);return t[n]}for(var u=0,l=1;l<t.length;l++)t[l]<t[u]&&(u=l);return t[u]}},get:function(t,e,r){var n=null==t?void 0:function(t,e){e=b(e,t);for(var r=0;r<e.length&&null!==t;r++)t=t[N(e[r])];return r&&r===e.length?t:void 0}(t,e);return void 0===n?r:n},set:function(t,e,r,n){return n="function"==typeof n?n:void 0,null==t?t:function(t,e,r,n){if(!m(t))return t;e=b(e,t);for(var o=t,i=0;i<e.length;i++){var u=N(e[i]),a=r;if(i+1!=e.length){var l=o[u];m(l)?a=l:void 0===(a=n?n(l,u,o):void 0)&&(a={})}T(o,u,a),o=o[u]}return t}(t,e,r,n)},split:function(t,e){for(var r=[],n=(t=y(t)).split(e),o=0;o<n.length;o++)n[o]=n[o].trim(),""!=n[o]&&r.push(n[o]);return r},animation:function(t,e,r){var n={timer:function(t,e,r){if(!t)throw new Error("Tick is required!");e=e||400;var o=(new Date).valueOf()+"_"+(1e3*Math.random()).toFixed(0);return w.push({id:o,createTime:new Date,tick:t,duration:e,callback:r}),n.start(),o},start:function(){x||(x=setInterval(n.tick,13))},tick:function(){var t,e,r,o,i,u,a,l=w;for((w=[]).length=0,e=0;e<l.length;e++)t=(i=l[e]).createTime,r=i.tick,u=i.duration,o=i.callback,r(a=(a=(+new Date-t)/u)>1?1:a),a<1&&i.id?w.push(i):o&&o(a);w.length<=0&&n.stop()},stop:function(){x&&(clearInterval(x),x=null)}},o=n.timer((function(e){t(e)}),e,r);return function(){var t;for(t in w)if(w[t].id==o)return void(w[t].id=void 0)}},Hermite:function(t){var e,r,n;t=function(t,e){for(var r in e)try{t[r]=e[r]}catch(t){throw new Error("Illegal property value！")}return t}({u:.5},t);var o=function(t){if(e){var o=(t-r)/(n-r),i=o*o;return(o*i*e[0]+i*e[1]+o*e[2]+e[3])*(n-r)}throw new Error("You shoud first set the position!")};return o.setP=function(i,u,a,l,f,c){if(!(i<a))throw new Error("The point x-position should be increamented!");r=i,n=a;var s=t.u*f,p=t.u*c;return e=[2*(u/=a-i)-2*(l/=a-i)+s+p,3*l-3*u-2*s-p,s,u],o},o},keyString:function(t){var e=(t=t||window.event).keyCode||t.which,r=j[e]||e;if(r){r.constructor!==Array&&(r=[r,r]);var n=t.shiftKey?"shift+":"",o=t.altKey?"alt+":"",i="",u=(t.ctrlKey?"ctrl+":"")+n+o;D.indexOf(r[0])>=0&&(r[0]=r[1]="");var a=t.code=="Key"+t.key&&!n;return i=u+(""==u&&a?r[1]:r[0]),""==r[0]&&(i=i.replace(/\+$/,"")),i}},Matrix4:function(t){var e=t||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],r={move:function(t,n,o,i){return e=A(function(t,e,r,n){n=n||0;var o=Math.sqrt(e*e+r*r+n*n);return[1,0,0,0,0,1,0,0,0,0,1,0,e*t/o,r*t/o,n*t/o,1]}(t,n,o,i),e),r},rotate:function(t,n,o,i,u,a,l){var f=function(t,e,r,n,o,i){if("number"==typeof t&&"number"==typeof e){if("number"!=typeof r?(r=0,n=t,o=e,i=1):"number"==typeof n&&"number"==typeof o&&"number"==typeof i||(n=t,o=e,i=r,t=0,e=0,r=0),t==n&&e==o&&r==i)throw new Error("It's not a legitimate ray!");var u=Math.sqrt((n-t)*(n-t)+(o-e)*(o-e)),a=0!=u?(o-e)/u:1,l=0!=u?(n-t)/u:0,f=(n-t)*l+(o-e)*a,c=i-r,s=Math.sqrt(f*f+c*c),p=0!=s?c/s:1,_=0!=s?f/s:0;return[[a,p*l,l*_,0,-l,a*p,a*_,0,0,-_,p,0,e*l-t*a,r*_-t*l*p-e*a*p,-t*l*_-e*a*_-r*p,1],[a,-l,0,0,p*l,p*a,-_,0,l*_,a*_,p,0,t,e,r,1]]}throw new Error("a1 and b1 is required!")}(n,o,i,u,a,l);return e=A(A(A(f[1],function(t){var e=Math.sin(t),r=Math.cos(t);return[r,e,0,0,-e,r,0,0,0,0,1,0,0,0,0,1]}(t)),f[0]),e),r},scale:function(t,n,o,i,u,a){return e=A(function(t,e,r,n,o,i){return[t,0,0,0,0,e,0,0,0,0,r,0,(n=n||0)-n*t,(o=o||0)-o*e,(i=i||0)-i*r,1]}(t,n,o,i,u,a),e),r},multiply:function(t,n){return e=n?A(e,t):A(t,e),r},use:function(t,r,n,o){var i=A(e,[t,r,n=n||0,o=o||1]);return i[0]=+i[0].toFixed(7),i[1]=+i[1].toFixed(7),i[2]=+i[2].toFixed(7),i[3]=+i[3].toFixed(7),i},value:function(){return e}};return r},tree:function(t){var e,r,n=t||{},o=function(t){var o,i,u,a=function(t){var e,r,o={},i=n.root(t);return e=r=n.id(i),o[e]={data:i,pid:null,id:e,children:[]},function r(i,u){var a,l=n.child(i,t);for(a=0;l&&a<l.length;a++)e=n.id(l[a]),o[u].children.push(e),o[e]={data:l[a],pid:u,id:e,children:[]},r(l[a],e)}(i,e),[r,o]}(t);return e=a[1],r=a[0],o=[],i=0,u=0,function t(r,n){var a;for(n>u&&(u=n),a=0;a<r.children.length;a++)t(e[r.children[a]],n+1);if(e[r.id].left=n+.5,0==a?(null==o[n]&&(o[n]=-.5),null==o[n-1]&&(o[n-1]=-.5),e[r.id].top=o[n]+1,o[n]+1+.5*(e[r.pid].children.length-1)-1<o[n-1]&&(e[r.id].top=o[n-1]+1-.5*(e[r.pid].children.length-1))):e[r.id].top=.5*(e[r.children[0]].top+e[r.children[a-1]].top),e[r.id].top<=o[n]){var l=o[n]+1-e[r.id].top;!function t(r,n){var i;for(e[r].top+=l,o[n]<e[r].top&&(o[n]=e[r].top),i=0;i<e[r].children.length;i++)t(e[r].children[i],n+1)}(r.id,n)}o[n]=e[r.id].top,e[r.id].top+.5>i&&(i=e[r.id].top+.5)}(e[r],0),{node:e,root:r,size:i,deep:u+1}};return o.root=function(t){return n.root=t,o},o.child=function(t){return n.child=t,o},o.id=function(t){return n.id=t,o},o}};if("object"===u(t)&&"object"===u(t.exports))t.exports=O;else{var S=window.__;O.noConflict=function(t){return window.__===O&&(window.__=S),O},window.__=O}}()})),e={blankReg:new RegExp("[\\x20\\t\\r\\n\\f]"),blanksReg:/^[\x20\t\r\n\f]{0,}$/},r=e.blanksReg,n=e.blankReg,o=e.blanksReg,i=function(t){var e=-1,i=null,u=!1,a="",l=["script","pre","style","code"],f=function(){return i=e++<t.length-1?t[e]:null},c=function(r){return t.substring(e,r+e>t.length?t.length:r+e)};for(f();n.test(i)&&e<t.length-1;)f();return function(){var n=i,s={};if(null==n)return null;if(u){for(s.type="textcode",s.tagName=n;c(a.length+3)!="</"+a+">"&&e<t.length;)s.tagName+=f();return s.tagName=s.tagName.replace(/<$/,""),u=!1,s}if("\x3c!--"==c(4)){for(s.type="comment",s.tagName=n;"--\x3e"!=c(3)&&e<t.length;)s.tagName+=f();return f(),f(),f(),s.tagName=s.tagName.replace(/^<!--/,"").replace(/-$/,""),s}if("<!DOCTYPE"==c(9)){for(s.type="DOCTYPE",s.tagName=n;">"!=c(1)&&e<t.length;)s.tagName+=f();return f(),s.tagName=s.tagName.replace(/^<!DOCTYPE/,"").replace(/>$/,""),s}if("<"==n){for(var p=!1,_=null,h=null;p||">"!=i&&e<t.length;)if(n+=f(),p){c(h+1).substring(1)==_&&(p=!1)}else{var g=c(2);'="'!=g&&"='"!=g||(_=g.replace("=",""),h=1,p=!0),'="'!=(g=c(3))&&"='"!=g||(_=g.replace("=",""),h=2,p=!0)}if(/^<\//.test(n))s.tagName=n.replace(/^<\//,"").replace(/>$/,""),s.type="endTag";else{/\/>$/.test(n)?(s.type="fullTag",n=n.replace(/\/>$/,"")):(s.type="beginTag",n=n.replace(/>$/,"")),n=n.replace(/^</,""),s.tagName="";for(var d=0;d<n.length&&" "!=n[d];d++)s.tagName+=n[d];var y=n.substring(d);o.test(y)?s.attrs={}:s.attrs=function(t){var e={},n=0;t=t.trim();return function o(){for(var i="",u="";n<t.length;n++){if(r.test(t[n])||n==t.length-1){i+=t[n],r.test(i)||(e[i.trim()]=""),n+=1;break}if("="==t[n]){n+=1;var a=null,l=-1;if('"'==t.substr(n,1)||"'"==t.substr(n,1)?(a=t.substr(n,1),l=1,n+=1):'"'!=t.substr(n,2)&&"'"!=t.substr(n,2)||(a=t.substr(n,2),l=2,n+=2),null!==a)for(;n<t.length;n++){if(t.substr(n,l)==a){e[i.trim()]=u.trim(),n+=2;break}u+=t[n]}else for(;n<t.length;n++){if(r.test(t[n])){e[i.trim()]=u.trim(),n+=1;break}u+=t[n]}break}i+=t[n]}n<t.length&&o()}(),e}(y)}}else{for(s.type="textcode",s.tagName=i;"<"!=c(1)&&e<t.length;)s.tagName+=f();s.tagName=s.tagName.replace(/<$/,""),e-=1}return"beginTag"==s.type?l.indexOf(s.tagName.toLowerCase())>-1&&(u=!0,a=s.tagName):"endTag"==s.type&&l.indexOf(s.tagName.toLowerCase())>-1&&(u=!1),f(),s}},u=function(t){var e=[];return t.forEach((function(r,n){if("beginTag"==r.type)e.push([n,r.tagName]);else if("endTag"==r.type)for(;e.length>0;){var o=e.pop();if(o[1]==r.tagName)break;t[o[0]].type="fullTag"}})),t},a=e.blanksReg,l=function(e,r){if(!t.isString(e))throw new Error("Template must be a String!");for(var n=i(e),o=n(),l=[];null!=o;)"textcode"==o.type&&a.test(o.tagName)||"DOCTYPE"==o.type||("comment"==o.type?r&&l.push(o):l.push(o)),o=n();l=function(t){t=u(t);var e=0,r=[];return t.forEach((function(t){"beginTag"==t.type?r.push({type:"tag",name:t.tagName,attrs:t.attrs,__deep__:++e,__tagType__:"double"}):"endTag"==t.type?e-=1:"textcode"==t.type?r.push({type:"text",content:t.tagName,__deep__:e+1}):"comment"==t.type?r.push({type:"comment",content:t.tagName,__deep__:e+1}):r.push({type:"tag",name:t.tagName,attrs:t.attrs,__deep__:e+1,__tagType__:"single"})})),r}(l);for(var f=[null],c=0,s=0;s<l.length;s++){var p=s,_=l[s].__deep__;l[s].childNodes=[],l[s].preNode=null,l[s].nextNode=null;var h=f[f.length-1],g=f.length>1?f[f.length-2]:null;if(_==c)l[p].preNode=h,l[h].nextNode=p,l[p].parentNode=g,l[g].childNodes.push(p),f[f.length-1]=p;else if(_>c)l[p].parentNode=h,null!=h&&l[h].childNodes.push(p),f.push(p);else{var d=f[f.length-1-(c-_)],y=f[f.length-2-(c-_)];l[p].preNode=d,null!=d&&(l[d].nextNode=p),l[p].parentNode=y,null!=y&&l[y].childNodes.push(p);for(var m=0;m<c-_;m++)f.pop();f[f.length-1]=p}c=_}return l},f=function(t){return this.length>t?this.__new__(this.__DomTree__,[this[t]]):this.__new__(this.__DomTree__,[])},c=function(){var t=null;return this.length>0&&(t=this.__DomTree__[this[0]].parentNode),this.__new__(this.__DomTree__,null==t?[]:[t])},s=function(){var t=[];if(this.length>0)for(var e=this.__DomTree__[this[0]].parentNode;null!=e;)t.push(e),e=this.__DomTree__[e].parentNode;return this.__new__(this.__DomTree__,t)},p=function(){var t=[];return this.length>0&&(t=this.__DomTree__[this[0]].childNodes),this.__new__(this.__DomTree__,t)},_=function(){var t=[];if(this.length>0){t=[this[0]];for(var e=this.__DomTree__[this[0]].preNode;null!=e;)t.unshift(e),e=this.__DomTree__[e].preNode;for(var r=this.__DomTree__[this[0]].nextNode;null!=r;)t.push(r),r=this.__DomTree__[r].nextNode}return this.__new__(this.__DomTree__,t)},h=function(){var t=[];if(this.length>0){var e=this.__DomTree__[this[0]].nextNode;null!=e&&t.push(e)}return this.__new__(this.__DomTree__,t)},g=function(){var t=[];if(this.length>0)for(var e=this.__DomTree__[this[0]].nextNode;null!=e;)t.push(e),e=this.__DomTree__[e].nextNode;return this.__new__(this.__DomTree__,t)},d=function(){var t=[];if(this.length>0){var e=this.__DomTree__[this[0]].preNode;null!=e&&t.unshift(e)}return this.__new__(this.__DomTree__,t)},y=function(){var t=[];if(this.length>0)for(var e=this.__DomTree__[this[0]].preNode;null!=e;)t.unshift(e),e=this.__DomTree__[e].preNode;return this.__new__(this.__DomTree__,t)},m=function(e,r){for(var n=0;n<e.childNodes.length;n++)e.childNodes[n]+=r;return t.isNumber(e.preNode)&&(e.preNode+=r),t.isNumber(e.nextNode)&&(e.nextNode+=r),t.isNumber(e.parentNode)&&(e.parentNode+=r),e},v=function(t,e){t.childNodes=e.childNodes,"null-engine-frame"!=e.name&&("tag"==e.type?(t.name=e.name,t.attrs=e.attrs,t.__tagType__=e.__tagType__,"text"==t.type&&delete t.content):(t.content=e.content,"tag"==t.type&&(delete t.attrs,delete t.name,delete t.__tagType__)),t.type=e.type)},b=function(e){if("text"==e[0].type)return e[0].content;for(var r,n,o,i=[e.__DomTree__[e[0]]],u=0;u<i.length;){do{r=i[u++]}while(t.isString(r));if(!r)break;if("tag"==r.type){for(var a in n="",r.attrs)n+="".concat(a,'="').concat(r.attrs[a],'" ');if("double"==r.__tagType__){(o=[]).push("<".concat(r.name," ").concat(n,">"));for(var l=0;l<r.childNodes.length;l++)o.push(e.__DomTree__[r.childNodes[l]]);o.push("</".concat(r.name,">")),i.splice.apply(i,[u-1,1].concat(_toConsumableArray2(o)))}else i[u-1]="<".concat(r.name," ").concat(n,"/>")}else i[u-1]=r.content}return i.join("")},N=function(t,e){for(var r=t.__DomTree__.length,n=1;n<e.length;n++)e[n].__deep__+=t.__DomTree__[t[0]].__deep__-1,t.__DomTree__.push(m(e[n],r-1));v(t.__DomTree__[t[0]],m(e[0],r-1))},T=function(e){if(this.length<=0)throw new Error("Null pointer!");if(t.isString(e))return N(this,l("<null-engine-frame>"+e+"</null-engine-frame>")),this;for(var r="",n=this.children(),o=0;o<n.length;o++)r+=b(n.eq(o));return r},w=function(e){if(this.length<=0)throw new Error("Null pointer!");return t.isString(e)?(N(this,l(e)),this):b(this)},x=function(t,e){if(this.length<=0)throw new Error("Null pointer!");return arguments.length>1?(this.__DomTree__[this[0]].attrs[t]=e,this):this.__DomTree__[this[0]].attrs[t]},j=function t(e,r){return new t.prototype.init(e,r)};j.prototype.init=function(e,r){if(this.__DomTree__=t.isArray(e)?e:l(e),t.isArray(r)){for(var n=0;n<r.length;n++)this[n]=r[n];this.length=r.length}else this[0]=0,this.length=1;return this},j.prototype.__new__=function(t,e){return j(t,e)},j.prototype.extend=function(t){for(var e in t)this[e]=t[e];return this},j.prototype.valueOf=function(){if(this.length<=0)return null;var t=this.__DomTree__[this[0]];return"text"==t.type?t.content:{tagName:t.name,attrs:t.attrs}},j.prototype.toString=function(){for(var e="[",r=0;r<this.length;r++){var n=j(this.__DomTree__,[this[r]]).valueOf();e+=(t.isString(n)?n:JSON.stringify(n))+","}return e.replace(/,$/,"")+"]"};var D=c,A=s,O=p,S=_,k=h,E=g,P=d,I=y,$=f,R=T,C=w,M=x;return j.prototype.extend({parent:D,parents:A,children:O,siblings:S,next:k,nextAll:E,prev:P,prevAll:I,eq:$,innerHTML:R,outerHTML:C,attr:M}),j.prototype.init.prototype=j.prototype,j}));